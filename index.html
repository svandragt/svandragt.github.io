---
layout: default
title: Your New Jekyll Site
---
<!DOCTYPE html>
<html lang="en-gb">
<head>
	<title>Test - VanDragt</title>
	<meta charset="utf-8">
	<meta name="author" content="Sander van Dragt" >
	<meta name="Copyright" content="Copyright (c) Sander van Dragt" >

	<link rel="stylesheet" type="text/css" href="styles.css">
	<link href='http://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
</head>
<body>

	<div id="menu">
		<a href="/" id="logo"><img src="logo.png" alt="vandragt.com" width="258" height="28" /></a>
		<ul class="horizontal_list">
			<li><a href="/archive">Archive</a></li>

			<li><a href="/about">About</a></li><li><a href="/find">Search</a></li>

			<li><a href="http://vandragt.com/rss">RSS</a></li>
		</ul>
		<div id="side">
			<h3 id="about">About</h3>
			<p>I'm <a href="/about">Sander van Dragt</a>: Web Architect, creator of <a href="http://getbard.com">Bard</a>, <a href="http://www.donationcoder.com/forum/index.php?topic=28912.0">NoteMe</a> and <a href="/about">smaller utilities</a>.</p>

			<p>I also sometimes write about to interactive and digital media such as desktop, web , scripting, second life and music production.</p>
			</p>
		</div>
	</div>
	<div id="container">

		<h1>VanDragt</h1>

		<div id="body">

		<h1>Blog Posts</h1>
		<ul class="posts">
		  {% for post in site.posts %}
			<li><span>{{ post.date | date_to_string }}</span> &raquo; <a href="{{ post.url }}">{{ post.title }}</a></li>
		  {% endfor %}
		</ul>




			  

		  
			
			 
			<div class="text item">
			  <h2><a href="http://vandragt.com/post/78436798756/silverstripe-relation-records-management-or-why-do-i">SilverStripe relation records management - or why do I have so many database records?</a><a style="text-decoration:none" class="permalink" href="http://vandragt.com/post/78436798756/silverstripe-relation-records-management-or-why-do-i">∞</a></h2>
			  <p>You have a bunch of DataObjects that has_many RelatedItems. You might have the following seperate situations:</p>

		<ol><li><p>Get the Dataobject-&gt;RelatedItems() and remove() one RelatedItem. What happens to that RelatedItem?</p></li>
		<li><p>Delete() a DataObject. What happens to the RelatedItems for that DataObject?</p></li>
		</ol><p>Regarding 1: (in SilverStripe 3.0.x) - the DataObjectID for that RelatedItem is set to 0.</p>

		<p>Regarding 2: Nothing, their DataObjectID will point to a non-existing record.</p>

		<p><strong>Wrong Expectations</strong></p>

		<p>In both cases I expected the objects to be deleted, but SilverStripe is going for safety first and keeps the records around just in case.</p>

		<p>This means that you might need to write maintenance code if you don’t expect this happening.</p>

		<p><strong>Things to keep in mind</strong></p>

		<p>If you are writing an sync task and want to make sure RelatedItems are fresh, do not delete / remove RelatedItems before creating new ones. You will be creating thousands of records over time.</p>

		<p>Instead, get the list of IDs, and unset the IDs that you find. Then remove any IDs left in the list as they weren’t in the source.</p>
		  
	</div> <!-- end single post -->

		  
			
			 
		




		</div>
		
	</div>
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-58671-4', 'vandragt.com');
		ga('send', 'pageview');

	</script>
	</body>
	</html>